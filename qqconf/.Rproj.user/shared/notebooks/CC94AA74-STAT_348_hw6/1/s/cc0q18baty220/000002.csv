"0","# Note, this uses the result for the posterior of normal data with known variance"
"0","# with a normal prior"
"0","get_school_tf <- function(mh_out, s_vec, te_vec, school_num) {"
"0","  "
"0","  num_sims <- length(mh_out$mu)"
"0","  num_schools <- length(s_vec)"
"0","  mu <- mh_out$mu"
"0","  eta <- mh_out$eta"
"0","  theta_post <- numeric(num_sims)"
"0","  for(i in seq(from = 1, to = num_sims, by = 1)) {"
"0","    "
"0","    theta_post[i] <- ((mu[i] / (exp(eta[i]) ^ 2)) + "
"0","                        (te_vec[school_num] / (s_vec[school_num] ^ 2))) /"
"0","                      ((1 / (exp(eta[i]) ^ 2)) + (1 / (s_vec[school_num] ^ 2)))"
"0","    "
"0","  }"
"0","  "
"0","  return(theta = theta_post)"
"0","  "
"0","}"
